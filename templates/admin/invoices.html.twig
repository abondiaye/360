{% extends 'base.html.twig' %}

{% block title %}Gestion des Factures - GeniusPro360°{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ asset('css/factures.css') }}">
{% endblock %}

{% block body %}
<div class="container mt-5">
    <h1 class="mb-4">Gestion des Factures</h1>
    <p class="lead">Ici tu peux créer et consulter les factures émises aux clients.</p>

    <!-- Bouton Retour avec icône -->
    <a href="{{ path('admin_dashboard') }}" class="btn btn-outline-secondary mb-3">
        <i class="bi bi-arrow-left-circle"></i> Retour au tableau de bord
    </a>

    <!-- Affichage des Factures -->
    <div class="card">
        <div class="card-header">
            <h4>Mes Factures</h4>
        </div>
        <div class="card-body">
            <table class="table table-bordered table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>#</th>
                        <th>Client</th>
                        <th>Montant</th>
                        <th>Date d'émission</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for facture in factures %}
                    <tr>
                        <td>{{ facture.id }}</td>
                        <td>{{ facture.client.name }}</td>
                        <td>{{ facture.amount }} EUR</td>
                        <td>{{ facture.createdOn|date('d/m/Y') }}</td>
                        <td>
                            {% if facture.status == 'paid' %}
                                <span class="badge bg-success">Payée</span>
                            {% else %}
                                <span class="badge bg-warning">Non payée</span>
                            {% endif %}
                        </td>
                        <td>
                            <a href="{{ path('admin_view_facture', {'id': facture.id}) }}" class="btn btn-sm btn-info">Voir</a>
                            <a href="{{ path('admin_edit_facture', {'id': facture.id}) }}" class="btn btn-sm btn-warning">Éditer</a>
                            <a href="{{ path('admin_delete_facture', {'id': facture.id}) }}" class="btn btn-sm btn-danger">Supprimer</a>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="6" class="text-center">Aucune facture disponible.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
