{% extends 'InoFreelancerManager.html.twig' %}

  {% block body %}
  <div class="row">
    <div class="col-12">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item h3" aria-current="page">
            <a href="{{ path("fl_customer_list") }}">
              <i class="fa-solid fa-user-group fa-fw"></i> Clients
            </a>
          </li>
          <li class="breadcrumb-item active h3" aria-current="page">{{ PAGE_TITLE }}</li>
        </ol>
      </nav>
    </div>
  </div>
  
  <form method="post" action="{{ path("fl_customer_save") }}" class="needs-validation" novalidate>
    <input type="hidden" name="CUSTID" value="{{ CUSTOMER.id|default(0) }}">
  
    <div class="row">
      <div class="col-xxl-6 col-md-12 mb-3">
        <div class="card">
          <div class="card-header">
            <span>Données client</span>
            {% if CUSTOMER.createdOn != "" %}
              <small class="text-muted">
                (Créé le {{ CUSTOMER.createdOn|format_datetime }}{% if CUSTOMER.lastModifiedOn != "" %}, dernière modification le {{ CUSTOMER.lastModifiedOn|format_datetime }}{% endif %})
              </small>
            {% endif %}
          </div>
          <div class="card-body">
  
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="customerNumber" name="customerNumber" placeholder="Numéro client" required value="{{ CUSTOMER.customerNumber }}">
                  <label for="customerNumber">Numéro client</label>
                </div>
              </div>
              <div class="col pt-3">
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" role="switch" id="active" name="active" value="1" {% if CUSTOMER.active == true %} checked{% endif %}>
                  <label class="form-check-label" for="active">Client actif ?</label>
                </div>
              </div>
            </div>
  
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="name" name="name" placeholder="Nom de l'entreprise" required value="{{ CUSTOMER.name }}">
              <label for="name">Nom de l'entreprise</label>
            </div>
  
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="street" name="street" placeholder="Rue" value="{{ CUSTOMER.street }}">
              <label for="street">Rue</label>
            </div>
  
            <div class="row">
              <div class="col-3">
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="postalCode" name="postalCode" placeholder="Code postal" value="{{ CUSTOMER.postalCode }}">
                  <label for="postalCode">Code postal</label>
                </div>
              </div>
              <div class="col-9">
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="city" name="city" placeholder="Ville" value="{{ CUSTOMER.city }}">
                  <label for="city">Ville</label>
                </div>
              </div>
            </div>
  
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="country" name="country" placeholder="Pays" value="{{ CUSTOMER.country }}">
              <label for="country">Pays</label>
            </div>
  
            <div class="form-floating mb-3">
              <input type="url" class="form-control" id="customerUrl" name="customerUrl" placeholder="Site web" value="{{ CUSTOMER.customerUrl }}">
              <label for="customerUrl">Site web</label>
            </div>
  
          </div>
        </div>
      </div>
  
      <div class="col">
        <div class="card mb-3">
          <div class="card-header">
            Contact
          </div>
          <div class="card-body">
  
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="contactName" name="contactName" placeholder="Nom du contact" required value="{{ CUSTOMER.contactName }}">
              <label for="contactName">Nom du contact</label>
            </div>
  
            <div class="form-floating mb-3">
              <input type="email" class="form-control" id="contactEmail" name="contactEmail" placeholder="Adresse e-mail" required value="{{ CUSTOMER.contactEmail }}">
              <label for="contactEmail">Adresse e-mail</label>
            </div>
  
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="contactPosition" name="contactPosition" placeholder="Poste" value="{{ CUSTOMER.contactPosition }}">
              <label for="contactPosition">Poste</label>
            </div>
  
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3">
                  <input type="tel" class="form-control" id="phoneBusiness" name="phoneBusiness" placeholder="Téléphone professionnel" value="{{ CUSTOMER.phoneBusiness }}">
                  <label for="phoneBusiness">Téléphone professionnel</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3">
                  <input type="tel" class="form-control" id="phoneFax" name="phoneFax" placeholder="Fax" value="{{ CUSTOMER.phoneFax }}">
                  <label for="phoneFax">Fax</label>
                </div>
              </div>
            </div>
  
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3">
                  <input type="tel" class="form-control" id="phoneMobile" name="phoneMobile" placeholder="Mobile" value="{{ CUSTOMER.phoneMobile }}">
                  <label for="phoneMobile">Mobile</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3">
                  <input type="tel" class="form-control" id="phonePrivate" name="phonePrivate" placeholder="Téléphone privé" value="{{ CUSTOMER.phonePrivate }}">
                  <label for="phonePrivate">Téléphone privé</label>
                </div>
              </div>
            </div>
  
          </div>
        </div>
      </div>
  
    </div>
  
    <div class="row">
      <div class="col">
        <button type="submit" class="btn btn-primary">
          <i class="far fa-save"></i> Enregistrer
        </button>
        {% if CUSTOMER.id|default(0) %}
        <button type="button" class="btn btn-danger" id="btn_cust_delete">
          <i class="fa-solid fa-trash"></i> Supprimer
        </button>
        {% endif %}
        <button type="button" class="btn btn-secondary" onclick="window.location.href='{{ path("fl_customer_list") }}'">
          <i class="fa-solid fa-arrow-left"></i> Retour
        </button>
      </div>
    </div>
  </form>
  
  <form method="post" action="{{ path("fl_customer_delete") }}" id="frm_cust_delete">
    <input type="hidden" name="CUSTID" value="{{ CUSTOMER.id }}">
  </form>
  {% endblock %}
  
  {% block javascripts %}
  <script>
  $("#btn_cust_delete").on('click', function() {
    SwalConfirmSubmit("Voulez-vous vraiment supprimer ce client ?<br>Toutes les données associées à ce client seront également supprimées !", 'frm_cust_delete');
  });
  </script>
  {% endblock %}
  